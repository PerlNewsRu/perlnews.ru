---
last\_modified: 2015-03-07 00:40:07
tags: CPAN, Perl
author: perlnews
title: В Perl 5.22 не попадёт новый Test-Simple
---

Как
[сообщил](http://permalink.gmane.org/gmane.comp.lang.perl.perl5.porters/148640)
Chad Granum, чтобы не создавать спешки и суеты с тестированием обновлённого
[Test-Simple](https://metacpan.org/release/Test-Simple), в состав Perl 5.22
войдёт проверенная стабильная версия 1.001014. Релиз 1.301001, который содержит
значительную переработку архитектуры тестирования и новое модернизированное
API, попадёт в разрабатываемую версию Perl уже после релиза Perl 5.22.

Основой нового `Test-Simple` станет
[Test::Stream](https://metacpan.org/pod/release/EXODIST/Test-Simple-1.301001_098/lib/Test/Stream.pm),
который станет собирать события всех процессов и тредов теста в одном месте.
Раньше все методы, такие как `ok`, `diag`, `note` просто генерировали
TAP-вывод, теперь же все подобные события поступают в `Test::Stream`, позволяя
перенаправлять вывод в произвольные файловые дескрипторы в нужной кодировке,
выполнять различные хуки до того, как состояние теста обновится. Упростится
создание субтестов, вложенных тестов, а также создание собственных тестовых
функций, которые теперь получат правильный контекст и не поломают TAP-вывод.
Появится возможность легко проводить отладку тестов с выводом стека вызовов в
точках, где происходит ошибка.
